<!doctype html>
<html lang="en" dir="ltr">
<head>
<title>Awesome Dat</title>
<meta charset="utf-8">

<link rel="stylesheet" href="/bundle.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/style.css">
</head>
<body>
<div id="choo-root" class="_d4e87350 minidocs flex flex-column m0 h-100">
      <div class="minidocs-header-flex flex">
        <header class="_19f2d18a minidocs-header ph4 w-100 bg-black-90">
    <nav class="flex justify-between">
      <div class="flex items-center">
        <div class="menu-button">
          <a class=" menu-toggle"></a>
        </div>
        <a href="/" title="Awesome Dat" class="inline-flex items-center">
        <img src="/dat-data-logo.svg" alt="Awesome Dat" class="minidocs-header-logo dib w2 h2" />
        <span class="minidocs-header-title ml2 pr2 white">Awesome Dat</span>
      </a>
      </div>
      <div class="minidocs-header-nav flex-grow flex items-center tr ttu">
        <a href="/install" title="Install" class="minidocs-header-link white dim link dn dib-ns mr3-ns">Install</a>
        <a href="http://datproject.org/" title="Home" class="minidocs-header-link white dim link dib mr3-ns">Home</a>
      </div>
    </nav>
  </header>
      </div>
      <main class="minidocs-main-flex flex">
        <div class="minidocs-sidebar-flex open order-0 overflow-auto bg-near-white">
        <div class="_068b628f minidocs-menu pa3">
      <div class="f3 pt2">Welcome</div><div><a href="/awesome-dat" class="content-link ">Awesome Dat</a></div><div class="f3 pt2">Dat Applications</div><div><a href="/dat" class="content-link ">datproject/dat</a></div><div><a href="/dat-desktop" class="content-link ">datproject/dat-desktop</a></div><div class="f3 pt2">Community Applications</div><div><a href="/sciencefair" class="content-link ">codeforscience/sciencefair</a></div><div><a href="/hyperirc" class="content-link ">mafintosh/hyperirc</a></div><div><a href="/soundcloud-archiver" class="content-link ">jondashkyle/soundcloud-archiver</a></div><div><a href="/hypervision" class="content-link ">mafintosh/hypervision</a></div><div><a href="/hypertweet" class="content-link ">joehand/hypertweet</a></div><div><a href="/dat-photos-app" class="content-link ">beakerbrowser/dat-photos-app</a></div><div class="f3 pt2">High-Level APIs</div><div><a href="/dat-node" class="content-link ">datproject/dat-node</a></div><div><a href="/dat-js" class="content-link ">datproject/dat-js</a></div><div><a href="/pauls-dat-api" class="content-link ">beakerbrowser/pauls-dat-api</a></div><div><a href="/node-dat-archive" class="content-link ">beakerbrowser/node-dat-archive</a></div><div class="f3 pt2">Hosting &amp; Dat Management</div><div><a href="/hypercore-archiver" class="content-link ">mafintosh/hypercore-archiver</a></div><div><a href="/hypercloud" class="content-link ">datprotocol/hypercloud</a></div><div><a href="/hashbase" class="content-link ">beakerbrowser/hashbase</a></div><div><a href="/dat-now" class="content-link ">joehand/dat-now</a></div><div><a href="/hypercore-archiver-bot" class="content-link ">mafintosh/hypercore-archiver-bot</a></div><div><a href="/hypercore-archiver-ws" class="content-link ">joehand/hypercore-archiver-ws</a></div><div>
            <a href="/dat-registry-api" class="content-link active">datproject/dat-registry-api</a>
            <div class="minidocs-menu-toc">
              <a href="#features" class="f5 content-link">Features</a><a href="#cli-usage" class="f5 content-link">CLI Usage</a><a href="#js-usage" class="f5 content-link">JS Usage</a><a href="#example" class="f5 content-link">Example</a><a href="#configuration" class="f5 content-link">Configuration</a>
            </div>
          </div><div><a href="/dat-registry-client" class="content-link ">datproject/dat-registry-client</a></div><div class="f3 pt2">Managing &amp; Aggregating Dats</div><div><a href="/multidat" class="content-link ">datproject/multidat</a></div><div><a href="/multidrive" class="content-link ">datproject/multidrive</a></div><div><a href="/dat-pki" class="content-link ">jayrbolton/dat-pki</a></div><div><a href="/injestdb" class="content-link ">beakerbrowser/injestdb</a></div><div class="f3 pt2">Http Hosting</div><div><a href="/hyperdrive-http" class="content-link ">joehand/hyperdrive-http</a></div><div><a href="/dathttpd" class="content-link ">beakerbrowser/dathttpd</a></div><div class="f3 pt2">Dat Link Utilties</div><div><a href="/dat-dns" class="content-link ">datprotocol/dat-dns</a></div><div><a href="/dat-link-resolve" class="content-link ">joehand/dat-link-resolve</a></div><div><a href="/parse-dat-url" class="content-link ">pfrazee/parse-dat-url</a></div><div><a href="/dat-encoding" class="content-link ">juliangruber/dat-encoding</a></div><div class="f3 pt2">Dat Utilities</div><div><a href="/dat-log" class="content-link ">joehand/dat-log</a></div><div><a href="/dat-ls" class="content-link ">mafintosh/dat-ls</a></div><div><a href="/hyperhealth" class="content-link ">karissa/hyperhealth</a></div><div><a href="/hyperdrive-network-speed" class="content-link ">joehand/hyperdrive-network-speed</a></div><div class="f3 pt2">File Imports &amp; Exports</div><div><a href="/hyperdrive-import-files" class="content-link ">juliangruber/hyperdrive-import-files</a></div><div><a href="/mirror-folder" class="content-link ">mafintosh/mirror-folder</a></div><div><a href="/hyperdrive-staging-area" class="content-link ">pfrazee/hyperdrive-staging-area</a></div><div><a href="/hyperdrive-to-zip-stream" class="content-link ">pfrazee/hyperdrive-to-zip-stream</a></div><div class="f3 pt2">Hypercore Tools</div><div><a href="/hyperpipe" class="content-link ">mafintosh/hyperpipe</a></div><div class="f3 pt2">Dat Core Modules</div><div><a href="/hyperdrive" class="content-link ">mafintosh/hyperdrive</a></div><div><a href="/hypercore" class="content-link ">mafintosh/hypercore</a></div><div class="f3 pt2">CLI Utilities</div><div><a href="/dat-doctor" class="content-link ">joehand/dat-doctor</a></div><div><a href="/dat-ignore" class="content-link ">joehand/dat-ignore</a></div><div><a href="/dat-json" class="content-link ">joehand/dat-json</a></div><div class="f3 pt2">Networking</div><div><a href="/hyperdiscovery" class="content-link ">karissa/hyperdiscovery</a></div><div><a href="/discovery-swarm" class="content-link ">mafintosh/discovery-swarm</a></div><div><a href="/webrtc-swarm" class="content-link ">mafintosh/webrtc-swarm</a></div><div><a href="/dat-swarm-defaults" class="content-link ">joehand/dat-swarm-defaults</a></div><div class="f3 pt2">Lower level networking modules</div><div><a href="/discovery-channel" class="content-link ">maxogden/discovery-channel</a></div><div><a href="/dns-discovery" class="content-link ">mafintosh/dns-discovery</a></div><div><a href="/multicast-dns" class="content-link ">mafintosh/multicast-dns</a></div><div><a href="/bittorrent-dht" class="content-link ">webtorrent/bittorrent-dht</a></div><div><a href="/utp-native" class="content-link ">mafintosh/utp-native</a></div><div><a href="/signalhub" class="content-link ">mafintosh/signalhub</a></div><div class="f3 pt2">Storage</div><div><a href="/dat-storage" class="content-link ">datproject/dat-storage</a></div><div><a href="/dat-secret-storage" class="content-link ">datproject/dat-secret-storage</a></div><div class="f3 pt2">Random Access</div><div><a href="/abstract-random-access" class="content-link ">juliangruber/abstract-random-access</a></div><div><a href="/multi-random-access" class="content-link ">mafintosh/multi-random-access</a></div><div><a href="/random-access-file" class="content-link ">mafintosh/random-access-file</a></div><div><a href="/random-access-memory" class="content-link ">mafintosh/random-access-memory</a></div><div><a href="/random-access-page-files" class="content-link ">mafintosh/random-access-page-files</a></div><div><a href="/dat-http" class="content-link ">datproject/dat-http</a></div><div><a href="/random-access-idb" class="content-link ">substack/random-access-idb</a></div><div class="f3 pt2">Other Related Dat Project Modules</div><div><a href="/peer-network" class="content-link ">mafintosh/peer-network</a></div><div><a href="/hyperdht" class="content-link ">mafintosh/hyperdht</a></div><div class="f3 pt2">Dat Project Organization Stuff</div><div><a href="/datproject.org" class="content-link ">datproject/datproject.org</a></div><div><a href="/discussions" class="content-link ">datproject/discussions</a></div><div><a href="/design" class="content-link ">datproject/design</a></div><div><a href="/dat-elements" class="content-link ">datproject/dat-elements</a></div><div><a href="/dat-colors" class="content-link ">kriesse/dat-colors</a></div><div><a href="/dat-icons" class="content-link ">kriesse/dat-icons</a></div><div><a href="/dat.json" class="content-link ">juliangruber/dat.json</a></div><div class="f3 pt2">Outdated</div><div><a href="/dat.haus" class="content-link ">juliangruber/dat.haus</a></div><div><a href="/hyperfeed" class="content-link ">poga/hyperfeed</a></div><div><a href="/normcore" class="content-link ">yoshuawuyts/normcore</a></div><div><a href="/github-to-hypercore" class="content-link ">yoshuawuyts/github-to-hypercore</a></div><div><a href="/hyperspark" class="content-link ">poga/hyperspark</a></div><div><a href="/hypercore-index" class="content-link ">juliangruber/hypercore-index</a></div><div><a href="/hyperdrive-encoding" class="content-link ">juliangruber/hyperdrive-encoding</a></div><div><a href="/hyperdrive-http-server" class="content-link ">mafintosh/hyperdrive-http-server</a></div><div><a href="/hyperdrive-http" class="content-link ">joehand/hyperdrive-http</a></div><div><a href="/dat-push" class="content-link ">joehand/dat-push</a></div><div><a href="/dat-backup" class="content-link ">joehand/dat-backup</a></div><div><a href="/archiver-server" class="content-link ">joehand/archiver-server</a></div><div><a href="/archiver-api" class="content-link ">joehand/archiver-api</a></div><div><a href="/hyperdrive-ln" class="content-link ">poga/hyperdrive-ln</a></div><div><a href="/hyperdrive-multiwriter" class="content-link ">substack/hyperdrive-multiwriter</a></div><div><a href="/hyperdrive-named-archives" class="content-link ">substack/hyperdrive-named-archives</a></div><div><a href="/git-dat" class="content-link ">substack/git-dat</a></div><div><a href="/jawn" class="content-link ">CfABrigadePhiladelphia/jawn</a></div><div><a href="/dat-archiver" class="content-link ">maxogden/dat-archiver</a></div><div><a href="/hyperdrive-stats" class="content-link ">juliangruber/hyperdrive-stats</a></div><div><a href="/hypercore-stats-server" class="content-link ">karissa/hypercore-stats-server</a></div><div><a href="/hypercore-stats-ui" class="content-link ">mafintosh/hypercore-stats-ui</a></div><div><a href="/zip-to-hyperdrive" class="content-link ">karissa/zip-to-hyperdrive</a></div><div><a href="/url-dat" class="content-link ">joehand/url-dat</a></div><div><a href="/tar-dat" class="content-link ">joehand/tar-dat</a></div><div><a href="/hyperdrive-duplicate" class="content-link ">joehand/hyperdrive-duplicate</a></div>
    </div>
      </div>
        <div id="minidocs-content" class="minidocs-content-flex order-1 overflow-auto">
          <div class="_32076d68 pa3 ph5-ns pv4-ns">
    
    
    <div><h1 id="dat-registry-api"><a href="#dat-registry-api" class="anchor"></a>Dat Registry API</h1><p>A web registry API including database and REST endpoints. Example hosted at <a href="http://datproject.org">http://datproject.org</a>.</p>
<p><a href="https://travis-ci.org/datproject/dat-registry-api"><img src="https://travis-ci.org/datproject/dat-registry-api.svg?branch=master" alt="Build Status"></a></p>
<h2 id="features"><a href="#features" class="anchor"></a>Features</h2><ul>
<li>Create user accounts.</li>
<li>Create short links for dats with user accounts.</li>
<li>Search dats and users.</li>
</ul>
<h2 id="cli-usage"><a href="#cli-usage" class="anchor"></a>CLI Usage</h2><p>Install <code>dat-registry-api</code> using npm and initialize the database:</p>
<pre><code>npm install dat-registry-api <span class="hljs-comment">--save</span>
dat-registry-api &lt;<span class="hljs-built_in">config</span>&gt;
</code></pre><p>See a default configuration file in <code>config/config.default.js</code>.</p>
<h2 id="js-usage"><a href="#js-usage" class="anchor"></a>JS Usage</h2><h4 id="var-api-apiconfig"><a href="#var-api-apiconfig" class="anchor"></a><code>var api = API(config)</code></h4><p>The API takes required configuration variables. Here&#39;s an example config. See below in the Configuration section for more details about what configuration variables can be changed.</p>
<p><code>config.js</code></p>
<pre><code class="lang-js">{
  <span class="hljs-attr">data</span>: <span class="hljs-string">'data'</span>,
  <span class="hljs-attr">admins</span>: [
    <span class="hljs-string">'admin'</span>, <span class="hljs-string">'pam'</span>, <span class="hljs-string">'willywonka'</span>
  ]
  township: {
    <span class="hljs-attr">secret</span>: <span class="hljs-string">'very very not secret'</span>,
    <span class="hljs-attr">db</span>: <span class="hljs-string">'township.db'</span>
  },
  <span class="hljs-attr">email</span>: {
    <span class="hljs-attr">fromEmail</span>: <span class="hljs-string">'hi@example.com'</span>
  },
  <span class="hljs-attr">db</span>: {
    <span class="hljs-attr">dialect</span>: <span class="hljs-string">'sqlite3'</span>,
    <span class="hljs-attr">connection</span>: {
      <span class="hljs-attr">filename</span>: <span class="hljs-string">'sqlite.db'</span>
    },
    <span class="hljs-attr">useNullAsDefault</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-attr">whitelist</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">archiver</span>: {
    <span class="hljs-attr">dir</span>: <span class="hljs-string">'archiver'</span>,
    <span class="hljs-attr">verifyConnection</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">timeout</span>: <span class="hljs-number">3000</span>
  }
}
</code></pre>
<h4 id="apiclose"><a href="#apiclose" class="anchor"></a>api.close()</h4><p>Destroys the underlying database connection.</p>
<h2 id="example"><a href="#example" class="anchor"></a>Example</h2><pre><code class="lang-js"><span class="hljs-keyword">var</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>)
<span class="hljs-keyword">var</span> Api = <span class="hljs-built_in">require</span>(<span class="hljs-string">'dat-registry-api'</span>)
<span class="hljs-keyword">var</span> config = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./config'</span>)

<span class="hljs-keyword">var</span> api = Api(config)
<span class="hljs-keyword">var</span> router = express()

router.post(<span class="hljs-string">'/users'</span>, api.users.post)
router.get(<span class="hljs-string">'/users'</span>, api.users.get)
router.put(<span class="hljs-string">'/users'</span>, api.users.put)
router.put(<span class="hljs-string">'/users/suspend'</span>, api.users.suspend)
router.delete(<span class="hljs-string">'/users'</span>, api.users.delete)

router.get(<span class="hljs-string">'/dats'</span>, api.dats.get)
router.post(<span class="hljs-string">'/dats'</span>, api.dats.post)
router.put(<span class="hljs-string">'/dats'</span>, api.dats.put)
router.delete(<span class="hljs-string">'/dats'</span>, api.dats.delete)

router.post(<span class="hljs-string">'/register'</span>, api.auth.register)
router.post(<span class="hljs-string">'/login'</span>, api.auth.login)
router.post(<span class="hljs-string">'/password-reset'</span>, api.auth.passwordReset)
router.post(<span class="hljs-string">'/password-reset-confirm'</span>, api.auth.passwordResetConfirm)
</code></pre>
<h2 id="configuration"><a href="#configuration" class="anchor"></a>Configuration</h2><h3 id="admins"><a href="#admins" class="anchor"></a>Admins</h3><p>Admins can add, modify, and delete dats that they do not own. Admins can also delete and modify other users. You can specify a list of admin users by their usernames in the configuration.</p>
<pre><code class="lang-js">{
  <span class="hljs-string">"admins"</span>: [<span class="hljs-string">"admin"</span>, <span class="hljs-string">"pam"</span>, <span class="hljs-string">"willywonka"</span>]
}
</code></pre>
<h3 id="secret-key"><a href="#secret-key" class="anchor"></a>Secret key</h3><p>Each deployment should have a different secret key. You want to set the secret key for generating password hashes and salts.</p>
<pre><code class="lang-js">{
   <span class="hljs-attr">township</span>: <span class="hljs-string">'&lt;SECRET_KEY&gt;'</span>
}
</code></pre>
<h3 id="default-location-of-account-and-sqlite-databases"><a href="#default-location-of-account-and-sqlite-databases" class="anchor"></a>Default location of account and sqlite databases</h3><p>Specify where you want data for the app (databases and also by default the archiver) to be located. By default, all the data will be stored in <code>./data</code>. If you&#39;d like the data to be stored somewhere else, add a <code>data</code> key:</p>
<pre><code>{
  <span class="hljs-attribute">data</span>: <span class="hljs-string">'/path/to/my/data'</span>
}
</code></pre><h3 id="closed-beta"><a href="#closed-beta" class="anchor"></a>Closed beta</h3><p>To create a closed beta, add the <code>whitelist</code> key with the path to a newline-delimited list of emails allowed to sign up. Default value <code>false</code> allows anyone to register an account.</p>
<pre><code>{
  <span class="hljs-attribute">whitelist</span>: <span class="hljs-string">'/path/to/my/list/of/folks.txt'</span>
}
</code></pre><p><code>folks.txt</code> should have a list of valid emails, each separated by a new line character. For example:</p>
<pre><code>pamlikesdata<span class="hljs-meta">@gmail</span>.com
robert.singletown<span class="hljs-meta">@sbcglobal</span>.netw
</code></pre><h3 id="location-of-cached-and-archived-dat-data"><a href="#location-of-cached-and-archived-dat-data" class="anchor"></a>Location of cached and archived dat data</h3><p>You can set the location where dat data is cached on the filesystem. By default it is stored in the <code>data</code> directory (above), in the <code>archiver</code> subdirectory. You can change this by using the <code>archiver</code> key:</p>
<pre><code>{
  <span class="hljs-attribute">archiver</span>: <span class="hljs-string">'/mnt1/bigdisk/archiver-data'</span>
}
</code></pre><h3 id="mixpanel-account"><a href="#mixpanel-account" class="anchor"></a>Mixpanel account</h3><p>The site will report basic information to Mixpanel if you have an account. It will by default use the environment variable <code>MIXPANEL_KEY</code>.</p>
<p>This can also be set in the configuration file by using the <code>mixpanel</code> key:</p>
<pre><code>{
  <span class="hljs-attribute">mixpanel</span>: <span class="hljs-string">'&lt;my-api-key-here&gt;'</span>
}
</code></pre><h3 id="advanced-password-security"><a href="#advanced-password-security" class="anchor"></a>Advanced password security</h3><p>If you want to have advanced security for generating passwords, you can use ES512 keys, for example. Generate the keys using <a href="https://connect2id.com/products/nimbus-jose-jwt/openssl-key-generation">this tutorial</a> and set their locations in the configuration file.</p>
<pre><code>{
  <span class="hljs-attribute">township</span>: {
    db: <span class="hljs-string">'township.db'</span>,
    publicKey: path.<span class="hljs-built_in">join</span>(<span class="hljs-string">'secrets'</span>, <span class="hljs-string">'ecdsa-p521-public.pem'</span>),
    privateKey: path.<span class="hljs-built_in">join</span>(<span class="hljs-string">'secrets'</span>, <span class="hljs-string">'ecdsa-p521-private.pem'</span>),
    algorithm: <span class="hljs-string">'ES512'</span>
  }
}
</code></pre></div>
  </div>
        </div>
      </main>
    </div>
<script src="/bundle.js"></script>
</body>
</html>
