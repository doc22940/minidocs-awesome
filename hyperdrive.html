<!doctype html>
<html lang="en" dir="ltr">
<head>
<title>Awesome Dat</title>
<meta charset="utf-8">

<link rel="stylesheet" href="/bundle.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/style.css">
</head>
<body>
<div id="choo-root" class="_d4e87350 minidocs flex flex-column m0 h-100">
      <div class="minidocs-header-flex flex">
        <header class="_19f2d18a minidocs-header ph4 w-100 bg-black-90">
    <nav class="flex justify-between">
      <div class="flex items-center">
        <div class="menu-button">
          <a class=" menu-toggle"></a>
        </div>
        <a href="/" title="Awesome Dat" class="inline-flex items-center">
        <img src="/dat-data-logo.svg" alt="Awesome Dat" class="minidocs-header-logo dib w2 h2" />
        <span class="minidocs-header-title ml2 pr2 white">Awesome Dat</span>
      </a>
      </div>
      <div class="minidocs-header-nav flex-grow flex items-center tr ttu">
        <a href="/install" title="Install" class="minidocs-header-link white dim link dn dib-ns mr3-ns">Install</a>
        <a href="http://datproject.org/" title="Home" class="minidocs-header-link white dim link dib mr3-ns">Home</a>
      </div>
    </nav>
  </header>
      </div>
      <main class="minidocs-main-flex flex">
        <div class="minidocs-sidebar-flex open order-0 overflow-auto bg-near-white">
        <div class="_068b628f minidocs-menu pa3">
      <div class="f3 pt2">Welcome</div><div><a href="/awesome-dat" class="content-link ">Awesome Dat</a></div><div class="f3 pt2">Dat Applications</div><div><a href="/dat" class="content-link ">datproject/dat</a></div><div><a href="/dat-desktop" class="content-link ">datproject/dat-desktop</a></div><div class="f3 pt2">Community Applications</div><div><a href="/sciencefair" class="content-link ">codeforscience/sciencefair</a></div><div><a href="/hyperirc" class="content-link ">mafintosh/hyperirc</a></div><div><a href="/soundcloud-archiver" class="content-link ">jondashkyle/soundcloud-archiver</a></div><div><a href="/hypervision" class="content-link ">mafintosh/hypervision</a></div><div><a href="/hypertweet" class="content-link ">joehand/hypertweet</a></div><div><a href="/dat-photos-app" class="content-link ">beakerbrowser/dat-photos-app</a></div><div class="f3 pt2">High-Level APIs</div><div><a href="/dat-node" class="content-link ">datproject/dat-node</a></div><div><a href="/dat-js" class="content-link ">datproject/dat-js</a></div><div><a href="/pauls-dat-api" class="content-link ">beakerbrowser/pauls-dat-api</a></div><div><a href="/node-dat-archive" class="content-link ">beakerbrowser/node-dat-archive</a></div><div class="f3 pt2">Hosting &amp; Dat Management</div><div><a href="/hypercore-archiver" class="content-link ">mafintosh/hypercore-archiver</a></div><div><a href="/hypercloud" class="content-link ">datprotocol/hypercloud</a></div><div><a href="/hashbase" class="content-link ">beakerbrowser/hashbase</a></div><div><a href="/dat-now" class="content-link ">joehand/dat-now</a></div><div><a href="/hypercore-archiver-bot" class="content-link ">mafintosh/hypercore-archiver-bot</a></div><div><a href="/hypercore-archiver-ws" class="content-link ">joehand/hypercore-archiver-ws</a></div><div><a href="/dat-registry-api" class="content-link ">datproject/dat-registry-api</a></div><div><a href="/dat-registry-client" class="content-link ">datproject/dat-registry-client</a></div><div class="f3 pt2">Managing &amp; Aggregating Dats</div><div><a href="/multidat" class="content-link ">datproject/multidat</a></div><div><a href="/multidrive" class="content-link ">datproject/multidrive</a></div><div><a href="/dat-pki" class="content-link ">jayrbolton/dat-pki</a></div><div><a href="/injestdb" class="content-link ">beakerbrowser/injestdb</a></div><div class="f3 pt2">Http Hosting</div><div><a href="/hyperdrive-http" class="content-link ">joehand/hyperdrive-http</a></div><div><a href="/dathttpd" class="content-link ">beakerbrowser/dathttpd</a></div><div class="f3 pt2">Dat Link Utilties</div><div><a href="/dat-dns" class="content-link ">datprotocol/dat-dns</a></div><div><a href="/dat-link-resolve" class="content-link ">joehand/dat-link-resolve</a></div><div><a href="/parse-dat-url" class="content-link ">pfrazee/parse-dat-url</a></div><div><a href="/dat-encoding" class="content-link ">juliangruber/dat-encoding</a></div><div class="f3 pt2">Dat Utilities</div><div><a href="/dat-log" class="content-link ">joehand/dat-log</a></div><div><a href="/dat-ls" class="content-link ">mafintosh/dat-ls</a></div><div><a href="/hyperhealth" class="content-link ">karissa/hyperhealth</a></div><div><a href="/hyperdrive-network-speed" class="content-link ">joehand/hyperdrive-network-speed</a></div><div class="f3 pt2">File Imports &amp; Exports</div><div><a href="/hyperdrive-import-files" class="content-link ">juliangruber/hyperdrive-import-files</a></div><div><a href="/mirror-folder" class="content-link ">mafintosh/mirror-folder</a></div><div><a href="/hyperdrive-staging-area" class="content-link ">pfrazee/hyperdrive-staging-area</a></div><div><a href="/hyperdrive-to-zip-stream" class="content-link ">pfrazee/hyperdrive-to-zip-stream</a></div><div class="f3 pt2">Hypercore Tools</div><div><a href="/hyperpipe" class="content-link ">mafintosh/hyperpipe</a></div><div class="f3 pt2">Dat Core Modules</div><div>
            <a href="/hyperdrive" class="content-link active">mafintosh/hyperdrive</a>
            <div class="minidocs-menu-toc">
              <a href="#usage" class="f5 content-link">Usage</a><a href="#api" class="f5 content-link">API</a>
            </div>
          </div><div><a href="/hypercore" class="content-link ">mafintosh/hypercore</a></div><div class="f3 pt2">CLI Utilities</div><div><a href="/dat-doctor" class="content-link ">joehand/dat-doctor</a></div><div><a href="/dat-ignore" class="content-link ">joehand/dat-ignore</a></div><div><a href="/dat-json" class="content-link ">joehand/dat-json</a></div><div class="f3 pt2">Networking</div><div><a href="/hyperdiscovery" class="content-link ">karissa/hyperdiscovery</a></div><div><a href="/discovery-swarm" class="content-link ">mafintosh/discovery-swarm</a></div><div><a href="/webrtc-swarm" class="content-link ">mafintosh/webrtc-swarm</a></div><div><a href="/dat-swarm-defaults" class="content-link ">joehand/dat-swarm-defaults</a></div><div class="f3 pt2">Lower level networking modules</div><div><a href="/discovery-channel" class="content-link ">maxogden/discovery-channel</a></div><div><a href="/dns-discovery" class="content-link ">mafintosh/dns-discovery</a></div><div><a href="/multicast-dns" class="content-link ">mafintosh/multicast-dns</a></div><div><a href="/bittorrent-dht" class="content-link ">webtorrent/bittorrent-dht</a></div><div><a href="/utp-native" class="content-link ">mafintosh/utp-native</a></div><div><a href="/signalhub" class="content-link ">mafintosh/signalhub</a></div><div class="f3 pt2">Storage</div><div><a href="/dat-storage" class="content-link ">datproject/dat-storage</a></div><div><a href="/dat-secret-storage" class="content-link ">datproject/dat-secret-storage</a></div><div class="f3 pt2">Random Access</div><div><a href="/abstract-random-access" class="content-link ">juliangruber/abstract-random-access</a></div><div><a href="/multi-random-access" class="content-link ">mafintosh/multi-random-access</a></div><div><a href="/random-access-file" class="content-link ">mafintosh/random-access-file</a></div><div><a href="/random-access-memory" class="content-link ">mafintosh/random-access-memory</a></div><div><a href="/random-access-page-files" class="content-link ">mafintosh/random-access-page-files</a></div><div><a href="/dat-http" class="content-link ">datproject/dat-http</a></div><div><a href="/random-access-idb" class="content-link ">substack/random-access-idb</a></div><div class="f3 pt2">Other Related Dat Project Modules</div><div><a href="/peer-network" class="content-link ">mafintosh/peer-network</a></div><div><a href="/hyperdht" class="content-link ">mafintosh/hyperdht</a></div><div class="f3 pt2">Dat Project Organization Stuff</div><div><a href="/datproject.org" class="content-link ">datproject/datproject.org</a></div><div><a href="/discussions" class="content-link ">datproject/discussions</a></div><div><a href="/design" class="content-link ">datproject/design</a></div><div><a href="/dat-elements" class="content-link ">datproject/dat-elements</a></div><div><a href="/dat-colors" class="content-link ">kriesse/dat-colors</a></div><div><a href="/dat-icons" class="content-link ">kriesse/dat-icons</a></div><div><a href="/dat.json" class="content-link ">juliangruber/dat.json</a></div><div class="f3 pt2">Outdated</div><div><a href="/dat.haus" class="content-link ">juliangruber/dat.haus</a></div><div><a href="/hyperfeed" class="content-link ">poga/hyperfeed</a></div><div><a href="/normcore" class="content-link ">yoshuawuyts/normcore</a></div><div><a href="/github-to-hypercore" class="content-link ">yoshuawuyts/github-to-hypercore</a></div><div><a href="/hyperspark" class="content-link ">poga/hyperspark</a></div><div><a href="/hypercore-index" class="content-link ">juliangruber/hypercore-index</a></div><div><a href="/hyperdrive-encoding" class="content-link ">juliangruber/hyperdrive-encoding</a></div><div><a href="/hyperdrive-http-server" class="content-link ">mafintosh/hyperdrive-http-server</a></div><div><a href="/hyperdrive-http" class="content-link ">joehand/hyperdrive-http</a></div><div><a href="/dat-push" class="content-link ">joehand/dat-push</a></div><div><a href="/dat-backup" class="content-link ">joehand/dat-backup</a></div><div><a href="/archiver-server" class="content-link ">joehand/archiver-server</a></div><div><a href="/archiver-api" class="content-link ">joehand/archiver-api</a></div><div><a href="/hyperdrive-ln" class="content-link ">poga/hyperdrive-ln</a></div><div><a href="/hyperdrive-multiwriter" class="content-link ">substack/hyperdrive-multiwriter</a></div><div><a href="/hyperdrive-named-archives" class="content-link ">substack/hyperdrive-named-archives</a></div><div><a href="/git-dat" class="content-link ">substack/git-dat</a></div><div><a href="/jawn" class="content-link ">CfABrigadePhiladelphia/jawn</a></div><div><a href="/dat-archiver" class="content-link ">maxogden/dat-archiver</a></div><div><a href="/hyperdrive-stats" class="content-link ">juliangruber/hyperdrive-stats</a></div><div><a href="/hypercore-stats-server" class="content-link ">karissa/hypercore-stats-server</a></div><div><a href="/hypercore-stats-ui" class="content-link ">mafintosh/hypercore-stats-ui</a></div><div><a href="/zip-to-hyperdrive" class="content-link ">karissa/zip-to-hyperdrive</a></div><div><a href="/url-dat" class="content-link ">joehand/url-dat</a></div><div><a href="/tar-dat" class="content-link ">joehand/tar-dat</a></div><div><a href="/hyperdrive-duplicate" class="content-link ">joehand/hyperdrive-duplicate</a></div>
    </div>
      </div>
        <div id="minidocs-content" class="minidocs-content-flex order-1 overflow-auto">
          <div class="_32076d68 pa3 ph5-ns pv4-ns">
    
    
    <div><h1 id="hyperdrive"><a href="#hyperdrive" class="anchor"></a>Hyperdrive</h1><p>Hyperdrive is a secure, real time distributed file system</p>
<pre><code class="lang-js">npm install hyperdrive
</code></pre>
<h2 id="usage"><a href="#usage" class="anchor"></a>Usage</h2><p>Hyperdrive aims to implement the same API as Node.js&#39; core fs module.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> hyperdrive = <span class="hljs-built_in">require</span>(<span class="hljs-string">'hyperdrive'</span>)
<span class="hljs-keyword">var</span> archive = hyperdrive(<span class="hljs-string">'./my-first-hyperdrive'</span>) <span class="hljs-comment">// content will be stored in this folder</span>

archive.writeFile(<span class="hljs-string">'/hello.txt'</span>, <span class="hljs-string">'world'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err
  archive.readdir(<span class="hljs-string">'/'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, list</span>) </span>{
    <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err
    <span class="hljs-built_in">console</span>.log(list) <span class="hljs-comment">// prints ['hello.txt']</span>
    archive.readFile(<span class="hljs-string">'/hello.txt'</span>, <span class="hljs-string">'utf-8'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, data</span>) </span>{
      <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err
      <span class="hljs-built_in">console</span>.log(data) <span class="hljs-comment">// prints 'world'</span>
    })
  })
})
</code></pre>
<p>A big difference is that you can replicate the file system to other computers! All you need is a stream.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> net = <span class="hljs-built_in">require</span>(<span class="hljs-string">'net'</span>)

<span class="hljs-comment">// ... on one machine</span>

<span class="hljs-keyword">var</span> server = net.createServer(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">socket</span>) </span>{
  socket.pipe(archive.replicate()).pipe(socket)
})

server.listen(<span class="hljs-number">10000</span>)

<span class="hljs-comment">// ... on another</span>

<span class="hljs-keyword">var</span> clonedArchive = hyperdrive(<span class="hljs-string">'./my-cloned-hyperdrive'</span>, origKey)
<span class="hljs-keyword">var</span> socket = net.connect(<span class="hljs-number">10000</span>)

socket.pipe(clonedArchive.replicate()).pipe(socket)
</code></pre>
<p>It also comes with build in versioning and real time replication. See more below.</p>
<h2 id="api"><a href="#api" class="anchor"></a>API</h2><h4 id="var-archive-hyperdrivestorage-key-options"><a href="#var-archive-hyperdrivestorage-key-options" class="anchor"></a><code>var archive = hyperdrive(storage, [key], [options])</code></h4><p>Create a new hyperdrive. Storage should be a function or a string.</p>
<p>If storage is a string content will be stored inside that folder.</p>
<p>If storage is a function it is called with a string name for each abstract-random-access instance that is needed
to store the archive.</p>
<p>Options include:</p>
<pre><code class="lang-js">{
  <span class="hljs-attr">sparse</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// only download data when it is read first time</span>
}
</code></pre>
<h4 id="var-stream-archivereplicateoptions"><a href="#var-stream-archivereplicateoptions" class="anchor"></a><code>var stream = archive.replicate([options])</code></h4><p>Replicate this archive. Options include</p>
<pre><code class="lang-js">{
  <span class="hljs-attr">live</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// keep replicating</span>
  download: <span class="hljs-literal">true</span>, <span class="hljs-comment">// download data from peers?</span>
  upload: <span class="hljs-literal">true</span> <span class="hljs-comment">// upload data to peers?</span>
}
</code></pre>
<h4 id="archiveversion"><a href="#archiveversion" class="anchor"></a><code>archive.version</code></h4><p>Get the current version of the archive (incrementing number).</p>
<h4 id="archivekey"><a href="#archivekey" class="anchor"></a><code>archive.key</code></h4><p>The public key identifying the archive.</p>
<h4 id="archivediscoverykey"><a href="#archivediscoverykey" class="anchor"></a><code>archive.discoveryKey</code></h4><p>A key derived from the public key that can be used to discovery other peers sharing this archive.</p>
<h4 id="archivewritable"><a href="#archivewritable" class="anchor"></a><code>archive.writable</code></h4><p>A boolean indicating whether the archive is writable.</p>
<h4 id="archiveonready"><a href="#archiveonready" class="anchor"></a><code>archive.on(&#39;ready&#39;)</code></h4><p>Emitted when the archive is fully ready and all properties has been populated.</p>
<h4 id="archiveonerror-err"><a href="#archiveonerror-err" class="anchor"></a><code>archive.on(&#39;error&#39;, err)</code></h4><p>Emitted when a critical error during load happened.</p>
<h4 id="var-olddrive-archivecheckoutversion"><a href="#var-olddrive-archivecheckoutversion" class="anchor"></a><code>var oldDrive = archive.checkout(version)</code></h4><p>Checkout a readonly copy of the archive at an old version.</p>
<h4 id="var-stream-archivehistoryoptions"><a href="#var-stream-archivehistoryoptions" class="anchor"></a><code>var stream = archive.history([options])</code></h4><p>Get a stream of all changes and their versions from this archive.</p>
<h4 id="var-stream-archivecreatereadstreamname-options"><a href="#var-stream-archivecreatereadstreamname-options" class="anchor"></a><code>var stream = archive.createReadStream(name, [options])</code></h4><p>Read a file out as a stream. Similar to fs.createReadStream.</p>
<p>Options include:</p>
<pre><code class="lang-js">{
  <span class="hljs-attr">start</span>: optionalByteOffset, <span class="hljs-comment">// similar to fs</span>
  end: optionalInclusiveByteEndOffset, <span class="hljs-comment">// similar to fs</span>
  length: optionalByteLength
}
</code></pre>
<h4 id="archivereadfilename-encoding-callback"><a href="#archivereadfilename-encoding-callback" class="anchor"></a><code>archive.readFile(name, [encoding], callback)</code></h4><p>Read an entire file into memory. Similar to fs.readFile.</p>
<h4 id="var-stream-archivecreatewritestreamname-options"><a href="#var-stream-archivecreatewritestreamname-options" class="anchor"></a><code>var stream = archive.createWriteStream(name, [options])</code></h4><p>Write a file as a stream. Similar to fs.createWriteStream.</p>
<h4 id="archivewritefilename-buffer-options-callback"><a href="#archivewritefilename-buffer-options-callback" class="anchor"></a><code>archive.writeFile(name, buffer, [options], [callback])</code></h4><p>Write a file from a single buffer. Similar to fs.writeFile.</p>
<h4 id="archiveunlinkname-callback"><a href="#archiveunlinkname-callback" class="anchor"></a><code>archive.unlink(name, [callback])</code></h4><p>Unlinks (deletes) a file. Similar to fs.unlink.</p>
<h4 id="archivemkdirname-options-callback"><a href="#archivemkdirname-options-callback" class="anchor"></a><code>archive.mkdir(name, [options], [callback])</code></h4><p>Explictly create an directory. Similar to fs.mkdir</p>
<h4 id="archivermdirname-callback"><a href="#archivermdirname-callback" class="anchor"></a><code>archive.rmdir(name, [callback])</code></h4><p>Delete an empty directory. Similar to fs.rmdir.</p>
<h4 id="archivereaddirname-options-callback"><a href="#archivereaddirname-options-callback" class="anchor"></a><code>archive.readdir(name, [options], [callback])</code></h4><p>Lists a directory. Similar to fs.readdir.</p>
<p>Options include:</p>
<pre><code class="lang-js">{
    <span class="hljs-attr">cached</span>: <span class="hljs-literal">true</span>|<span class="hljs-literal">false</span>, <span class="hljs-comment">// default: false</span>
}
</code></pre>
<p>If <code>cached</code> is set to <code>true</code>, this function returns results from the local version of the archive’s append-tree. Default behavior is to fetch the latest remote version of the archive before returning list of directories.</p>
<h4 id="archivestatname-callback"><a href="#archivestatname-callback" class="anchor"></a><code>archive.stat(name, callback)</code></h4><p>Stat an entry. Similar to fs.stat. Sample output:</p>
<pre><code><span class="hljs-selector-tag">Stat</span> {
  <span class="hljs-attribute">dev</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attribute">nlink</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attribute">rdev</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attribute">blksize</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attribute">ino</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attribute">mode</span>: <span class="hljs-number">16877</span>,
  <span class="hljs-attribute">uid</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attribute">gid</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attribute">size</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attribute">offset</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attribute">blocks</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attribute">atime</span>: <span class="hljs-number">2017</span><span class="hljs-attribute">-04-10T18</span>:<span class="hljs-number">59</span>:<span class="hljs-number">00.147</span>Z,
  <span class="hljs-attribute">mtime</span>: <span class="hljs-number">2017</span><span class="hljs-attribute">-04-10T18</span>:<span class="hljs-number">59</span>:<span class="hljs-number">00.147</span>Z,
  <span class="hljs-attribute">ctime</span>: <span class="hljs-number">2017</span><span class="hljs-attribute">-04-10T18</span>:<span class="hljs-number">59</span>:<span class="hljs-number">00.147</span>Z,
  <span class="hljs-attribute">linkname</span>: undefined }
</code></pre><p>The output object includes methods similar to fs.stat:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> stat = archive.stat(<span class="hljs-string">'/hello.txt'</span>)
stat.isDirectory()
stat.isFile()
</code></pre>
<h4 id="archivelstatname-callback"><a href="#archivelstatname-callback" class="anchor"></a><code>archive.lstat(name, callback)</code></h4><p>Stat an entry but do not follow symlinks. Similar to fs.lstat.</p>
<h4 id="archiveaccessname-callback"><a href="#archiveaccessname-callback" class="anchor"></a><code>archive.access(name, callback)</code></h4><p>Similar to fs.access.</p>
<h4 id="archiveclosecallback"><a href="#archiveclosecallback" class="anchor"></a><code>archive.close([callback])</code></h4><p>Closes all open resources used by the archive.
The archive should no longer be used after calling this.</p>
</div>
  </div>
        </div>
      </main>
    </div>
<script src="/bundle.js"></script>
</body>
</html>
