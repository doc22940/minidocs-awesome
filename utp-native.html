<!doctype html>
<html lang="en" dir="ltr">
<head>
<title>Awesome Dat</title>
<meta charset="utf-8">

<link rel="stylesheet" href="/bundle.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/style.css">
</head>
<body>
<div id="choo-root" class="_d4e87350 minidocs flex flex-column m0 h-100">
      <div class="minidocs-header-flex flex">
        <header class="_19f2d18a minidocs-header ph4 w-100 bg-black-90">
    <nav class="flex justify-between">
      <div class="flex items-center">
        <div class="menu-button">
          <a class=" menu-toggle"></a>
        </div>
        <a href="/" title="Awesome Dat" class="inline-flex items-center">
        <img src="/dat-data-logo.svg" alt="Awesome Dat" class="minidocs-header-logo dib w2 h2" />
        <span class="minidocs-header-title ml2 pr2 white">Awesome Dat</span>
      </a>
      </div>
      <div class="minidocs-header-nav flex-grow flex items-center tr ttu">
        <a href="/install" title="Install" class="minidocs-header-link white dim link dn dib-ns mr3-ns">Install</a>
        <a href="http://datproject.org/" title="Home" class="minidocs-header-link white dim link dib mr3-ns">Home</a>
      </div>
    </nav>
  </header>
      </div>
      <main class="minidocs-main-flex flex">
        <div class="minidocs-sidebar-flex open order-0 overflow-auto bg-near-white">
        <div class="_068b628f minidocs-menu pa3">
      <div class="f3 pt2">Welcome</div><div><a href="/awesome-dat" class="content-link ">Awesome Dat</a></div><div class="f3 pt2">Dat Applications</div><div><a href="/dat" class="content-link ">datproject/dat</a></div><div><a href="/dat-desktop" class="content-link ">datproject/dat-desktop</a></div><div class="f3 pt2">Community Applications</div><div><a href="/sciencefair" class="content-link ">codeforscience/sciencefair</a></div><div><a href="/hyperirc" class="content-link ">mafintosh/hyperirc</a></div><div><a href="/soundcloud-archiver" class="content-link ">jondashkyle/soundcloud-archiver</a></div><div><a href="/hypervision" class="content-link ">mafintosh/hypervision</a></div><div><a href="/hypertweet" class="content-link ">joehand/hypertweet</a></div><div><a href="/dat-photos-app" class="content-link ">beakerbrowser/dat-photos-app</a></div><div class="f3 pt2">High-Level APIs</div><div><a href="/dat-node" class="content-link ">datproject/dat-node</a></div><div><a href="/dat-js" class="content-link ">datproject/dat-js</a></div><div><a href="/pauls-dat-api" class="content-link ">beakerbrowser/pauls-dat-api</a></div><div><a href="/node-dat-archive" class="content-link ">beakerbrowser/node-dat-archive</a></div><div class="f3 pt2">Hosting &amp; Dat Management</div><div><a href="/hypercore-archiver" class="content-link ">mafintosh/hypercore-archiver</a></div><div><a href="/hypercloud" class="content-link ">datprotocol/hypercloud</a></div><div><a href="/hashbase" class="content-link ">beakerbrowser/hashbase</a></div><div><a href="/dat-now" class="content-link ">joehand/dat-now</a></div><div><a href="/hypercore-archiver-bot" class="content-link ">mafintosh/hypercore-archiver-bot</a></div><div><a href="/hypercore-archiver-ws" class="content-link ">joehand/hypercore-archiver-ws</a></div><div><a href="/dat-registry-api" class="content-link ">datproject/dat-registry-api</a></div><div><a href="/dat-registry-client" class="content-link ">datproject/dat-registry-client</a></div><div class="f3 pt2">Managing &amp; Aggregating Dats</div><div><a href="/multidat" class="content-link ">datproject/multidat</a></div><div><a href="/multidrive" class="content-link ">datproject/multidrive</a></div><div><a href="/dat-pki" class="content-link ">jayrbolton/dat-pki</a></div><div><a href="/injestdb" class="content-link ">beakerbrowser/injestdb</a></div><div class="f3 pt2">Http Hosting</div><div><a href="/hyperdrive-http" class="content-link ">joehand/hyperdrive-http</a></div><div><a href="/dathttpd" class="content-link ">beakerbrowser/dathttpd</a></div><div class="f3 pt2">Dat Link Utilties</div><div><a href="/dat-dns" class="content-link ">datprotocol/dat-dns</a></div><div><a href="/dat-link-resolve" class="content-link ">joehand/dat-link-resolve</a></div><div><a href="/parse-dat-url" class="content-link ">pfrazee/parse-dat-url</a></div><div><a href="/dat-encoding" class="content-link ">juliangruber/dat-encoding</a></div><div class="f3 pt2">Dat Utilities</div><div><a href="/dat-log" class="content-link ">joehand/dat-log</a></div><div><a href="/dat-ls" class="content-link ">mafintosh/dat-ls</a></div><div><a href="/hyperhealth" class="content-link ">karissa/hyperhealth</a></div><div><a href="/hyperdrive-network-speed" class="content-link ">joehand/hyperdrive-network-speed</a></div><div class="f3 pt2">File Imports &amp; Exports</div><div><a href="/hyperdrive-import-files" class="content-link ">juliangruber/hyperdrive-import-files</a></div><div><a href="/mirror-folder" class="content-link ">mafintosh/mirror-folder</a></div><div><a href="/hyperdrive-staging-area" class="content-link ">pfrazee/hyperdrive-staging-area</a></div><div><a href="/hyperdrive-to-zip-stream" class="content-link ">pfrazee/hyperdrive-to-zip-stream</a></div><div class="f3 pt2">Hypercore Tools</div><div><a href="/hyperpipe" class="content-link ">mafintosh/hyperpipe</a></div><div class="f3 pt2">Dat Core Modules</div><div><a href="/hyperdrive" class="content-link ">mafintosh/hyperdrive</a></div><div><a href="/hypercore" class="content-link ">mafintosh/hypercore</a></div><div class="f3 pt2">CLI Utilities</div><div><a href="/dat-doctor" class="content-link ">joehand/dat-doctor</a></div><div><a href="/dat-ignore" class="content-link ">joehand/dat-ignore</a></div><div><a href="/dat-json" class="content-link ">joehand/dat-json</a></div><div class="f3 pt2">Networking</div><div><a href="/hyperdiscovery" class="content-link ">karissa/hyperdiscovery</a></div><div><a href="/discovery-swarm" class="content-link ">mafintosh/discovery-swarm</a></div><div><a href="/webrtc-swarm" class="content-link ">mafintosh/webrtc-swarm</a></div><div><a href="/dat-swarm-defaults" class="content-link ">joehand/dat-swarm-defaults</a></div><div class="f3 pt2">Lower level networking modules</div><div><a href="/discovery-channel" class="content-link ">maxogden/discovery-channel</a></div><div><a href="/dns-discovery" class="content-link ">mafintosh/dns-discovery</a></div><div><a href="/multicast-dns" class="content-link ">mafintosh/multicast-dns</a></div><div><a href="/bittorrent-dht" class="content-link ">webtorrent/bittorrent-dht</a></div><div>
            <a href="/utp-native" class="content-link active">mafintosh/utp-native</a>
            <div class="minidocs-menu-toc">
              <a href="#usage" class="f5 content-link">Usage</a><a href="#api" class="f5 content-link">API</a><a href="#nethttpnodejsorgapinethtml-like-api" class="f5 content-link">[net](http://nodejs.org/api/net.html)-like API</a><a href="#socket-api" class="f5 content-link">Socket API</a><a href="#license" class="f5 content-link">License</a>
            </div>
          </div><div><a href="/signalhub" class="content-link ">mafintosh/signalhub</a></div><div class="f3 pt2">Storage</div><div><a href="/dat-storage" class="content-link ">datproject/dat-storage</a></div><div><a href="/dat-secret-storage" class="content-link ">datproject/dat-secret-storage</a></div><div class="f3 pt2">Random Access</div><div><a href="/abstract-random-access" class="content-link ">juliangruber/abstract-random-access</a></div><div><a href="/multi-random-access" class="content-link ">mafintosh/multi-random-access</a></div><div><a href="/random-access-file" class="content-link ">mafintosh/random-access-file</a></div><div><a href="/random-access-memory" class="content-link ">mafintosh/random-access-memory</a></div><div><a href="/random-access-page-files" class="content-link ">mafintosh/random-access-page-files</a></div><div><a href="/dat-http" class="content-link ">datproject/dat-http</a></div><div><a href="/random-access-idb" class="content-link ">substack/random-access-idb</a></div><div class="f3 pt2">Other Related Dat Project Modules</div><div><a href="/peer-network" class="content-link ">mafintosh/peer-network</a></div><div><a href="/hyperdht" class="content-link ">mafintosh/hyperdht</a></div><div class="f3 pt2">Dat Project Organization Stuff</div><div><a href="/datproject.org" class="content-link ">datproject/datproject.org</a></div><div><a href="/discussions" class="content-link ">datproject/discussions</a></div><div><a href="/design" class="content-link ">datproject/design</a></div><div><a href="/dat-elements" class="content-link ">datproject/dat-elements</a></div><div><a href="/dat-colors" class="content-link ">kriesse/dat-colors</a></div><div><a href="/dat-icons" class="content-link ">kriesse/dat-icons</a></div><div><a href="/dat.json" class="content-link ">juliangruber/dat.json</a></div><div class="f3 pt2">Outdated</div><div><a href="/dat.haus" class="content-link ">juliangruber/dat.haus</a></div><div><a href="/hyperfeed" class="content-link ">poga/hyperfeed</a></div><div><a href="/normcore" class="content-link ">yoshuawuyts/normcore</a></div><div><a href="/github-to-hypercore" class="content-link ">yoshuawuyts/github-to-hypercore</a></div><div><a href="/hyperspark" class="content-link ">poga/hyperspark</a></div><div><a href="/hypercore-index" class="content-link ">juliangruber/hypercore-index</a></div><div><a href="/hyperdrive-encoding" class="content-link ">juliangruber/hyperdrive-encoding</a></div><div><a href="/hyperdrive-http-server" class="content-link ">mafintosh/hyperdrive-http-server</a></div><div><a href="/hyperdrive-http" class="content-link ">joehand/hyperdrive-http</a></div><div><a href="/dat-push" class="content-link ">joehand/dat-push</a></div><div><a href="/dat-backup" class="content-link ">joehand/dat-backup</a></div><div><a href="/archiver-server" class="content-link ">joehand/archiver-server</a></div><div><a href="/archiver-api" class="content-link ">joehand/archiver-api</a></div><div><a href="/hyperdrive-ln" class="content-link ">poga/hyperdrive-ln</a></div><div><a href="/hyperdrive-multiwriter" class="content-link ">substack/hyperdrive-multiwriter</a></div><div><a href="/hyperdrive-named-archives" class="content-link ">substack/hyperdrive-named-archives</a></div><div><a href="/git-dat" class="content-link ">substack/git-dat</a></div><div><a href="/jawn" class="content-link ">CfABrigadePhiladelphia/jawn</a></div><div><a href="/dat-archiver" class="content-link ">maxogden/dat-archiver</a></div><div><a href="/hyperdrive-stats" class="content-link ">juliangruber/hyperdrive-stats</a></div><div><a href="/hypercore-stats-server" class="content-link ">karissa/hypercore-stats-server</a></div><div><a href="/hypercore-stats-ui" class="content-link ">mafintosh/hypercore-stats-ui</a></div><div><a href="/zip-to-hyperdrive" class="content-link ">karissa/zip-to-hyperdrive</a></div><div><a href="/url-dat" class="content-link ">joehand/url-dat</a></div><div><a href="/tar-dat" class="content-link ">joehand/tar-dat</a></div><div><a href="/hyperdrive-duplicate" class="content-link ">joehand/hyperdrive-duplicate</a></div>
    </div>
      </div>
        <div id="minidocs-content" class="minidocs-content-flex order-1 overflow-auto">
          <div class="_32076d68 pa3 ph5-ns pv4-ns">
    
    
    <div><h1 id="utp-native"><a href="#utp-native" class="anchor"></a>utp-native</h1><p>Native bindings for <a href="https://github.com/bittorrent/libutp">libutp</a>. For more information about utp read <a href="http://www.bittorrent.org/beps/bep_0029.html">BEP 29</a>.</p>
<pre><code><span class="hljs-built_in">npm</span> install utp-<span class="hljs-keyword">native</span>
</code></pre><p><a href="https://travis-ci.org/mafintosh/utp-native"><img src="https://travis-ci.org/mafintosh/utp-native.svg?branch=master" alt="build status"></a>
<a href="https://ci.appveyor.com/project/juliangruber/utp-native/branch/master"><img src="https://ci.appveyor.com/api/projects/status/mflwybd36fnkq8vu/branch/master?svg=true" alt="build status"></a>
<a href="https://github.com/feross/standard"><img src="https://img.shields.io/badge/code%20style-standard-brightgreen.svg?style=flat" alt="js-standard-style"></a></p>
<h2 id="usage"><a href="#usage" class="anchor"></a>Usage</h2><pre><code class="lang-js"><span class="hljs-keyword">var</span> utp = <span class="hljs-built_in">require</span>(<span class="hljs-string">'utp-native'</span>)

<span class="hljs-keyword">var</span> server = utp.createServer(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">socket</span>) </span>{
  socket.pipe(socket) <span class="hljs-comment">// echo server</span>
})

server.listen(<span class="hljs-number">10000</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> socket = utp.connect(<span class="hljs-number">10000</span>)

  socket.write(<span class="hljs-string">'hello world'</span>)
  socket.on(<span class="hljs-string">'data'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'echo: '</span> + data)
  })
})
</code></pre>
<h2 id="api"><a href="#api" class="anchor"></a>API</h2><p>There two APIs available. One that mimicks the net core module in Node as much as possible and another one that allows you to reuse the same udp socket for both the client and server. The last one is useful if you plan on using this in combination with NAT hole punching.</p>
<h2 id="nethttpnodejsorgapinethtml-like-api"><a href="#nethttpnodejsorgapinethtml-like-api" class="anchor"></a><a href="http://nodejs.org/api/net.html">net</a>-like API</h2><h4 id="server-utpcreateserveronconnection"><a href="#server-utpcreateserveronconnection" class="anchor"></a><code>server = utp.createServer([onconnection])</code></h4><p>Create a new utp server instance.</p>
<h4 id="serverlistenport-address-onlistening"><a href="#serverlistenport-address-onlistening" class="anchor"></a><code>server.listen([port], [address], [onlistening])</code></h4><p>Listen for on port. If you don&#39;t provide a port or pass in <code>0</code> a free port will be used. Optionally you can provide an interface address as well, defaults to <code>0.0.0.0</code>.</p>
<h4 id="var-addr-serveraddress"><a href="#var-addr-serveraddress" class="anchor"></a><code>var addr = server.address()</code></h4><p>Returns an address object, <code>{port, address}</code> that tell you which port / address this server is bound to.</p>
<h4 id="serveronlistening"><a href="#serveronlistening" class="anchor"></a><code>server.on(&#39;listening&#39;)</code></h4><p>Emitted when the server is listening</p>
<h4 id="serveronconnection-connection"><a href="#serveronconnection-connection" class="anchor"></a><code>server.on(&#39;connection&#39;, connection)</code></h4><p>Emitted when a client has connected to this server</p>
<h4 id="serveronerror-err"><a href="#serveronerror-err" class="anchor"></a><code>server.on(&#39;error&#39;, err)</code></h4><p>Emitted when a critical error happened</p>
<h4 id="serverclose"><a href="#serverclose" class="anchor"></a><code>server.close()</code></h4><p>Closes the server.</p>
<h4 id="serveronclose"><a href="#serveronclose" class="anchor"></a><code>server.on(&#39;close&#39;)</code></h4><p>Emitted when the server is fully closed. Note that this will only happen after all connections to the server are closed.</p>
<h4 id="servermaxconnections"><a href="#servermaxconnections" class="anchor"></a><code>server.maxConnections</code></h4><p>Set this property is you want to limit the max amount of connections you want to receive</p>
<h4 id="serverconnections"><a href="#serverconnections" class="anchor"></a><code>server.connections</code></h4><p>An array of all the connections the server has.</p>
<h4 id="serverref"><a href="#serverref" class="anchor"></a><code>server.ref()</code></h4><p>Opposite of unref.</p>
<h4 id="serverunref"><a href="#serverunref" class="anchor"></a><code>server.unref()</code></h4><p>Unreferences the server from the node event loop.</p>
<h4 id="connection-utpconnectport-host"><a href="#connection-utpconnectport-host" class="anchor"></a><code>connection = utp.connect(port, [host])</code></h4><p>Create a new client connection. host defaults to localhost.
The client connection is a duplex stream that you can write / read from.</p>
<h4 id="address-connectionaddress"><a href="#address-connectionaddress" class="anchor"></a><code>address = connection.address()</code></h4><p>Similar to <code>server.address</code>.</p>
<h4 id="connectionref"><a href="#connectionref" class="anchor"></a><code>connection.ref()</code></h4><p>Similar to <code>server.ref()</code></p>
<h4 id="connectionunref"><a href="#connectionunref" class="anchor"></a><code>connection.unref()</code></h4><p>Similar to <code>server.unref()</code></p>
<h4 id="connectiononclose"><a href="#connectiononclose" class="anchor"></a><code>connection.on(&#39;close&#39;)</code></h4><p>Emitted when the connection is fully closed.</p>
<h4 id="connectiononerror-err"><a href="#connectiononerror-err" class="anchor"></a><code>connection.on(&#39;error&#39;, err)</code></h4><p>Emitted if an unexpected error happens.</p>
<h4 id="connectiondestroy"><a href="#connectiondestroy" class="anchor"></a><code>connection.destroy()</code></h4><p>Forcefully destroys the connection.</p>
<p>In addition to this the connection has all the classic stream methods such as <code>.write</code> etc.</p>
<h2 id="socket-api"><a href="#socket-api" class="anchor"></a>Socket API</h2><p>The socket api allows you to reuse the same underlying UDP socket to both connect to other clients on accept incoming connections. It also mimicks the node core <a href="https://nodejs.org/api/dgram.html#dgram_class_dgram_socket">dgram socket</a> api.</p>
<h4 id="socket-utp"><a href="#socket-utp" class="anchor"></a><code>socket = utp()</code></h4><p>Create a new utp socket</p>
<h4 id="socketbindport-host-onlistening"><a href="#socketbindport-host-onlistening" class="anchor"></a><code>socket.bind([port], [host], [onlistening])</code></h4><p>Bind the socket.</p>
<h4 id="socketonlistening"><a href="#socketonlistening" class="anchor"></a><code>socket.on(&#39;listening&#39;)</code></h4><p>Emitted when the socket is bound.</p>
<h4 id="socketsendbuf-offset-len-port-host-callback"><a href="#socketsendbuf-offset-len-port-host-callback" class="anchor"></a><code>socket.send(buf, offset, len, port, host, [callback])</code></h4><p>Send a udp message.</p>
<h4 id="socketonmessage-buffer-rinfo"><a href="#socketonmessage-buffer-rinfo" class="anchor"></a><code>socket.on(&#39;message&#39;, buffer, rinfo)</code></h4><p>Listen for a udp message.</p>
<h4 id="socketclose"><a href="#socketclose" class="anchor"></a><code>socket.close()</code></h4><p>Close the socket.</p>
<h4 id="address-socketaddress"><a href="#address-socketaddress" class="anchor"></a><code>address = socket.address()</code></h4><p>Returns an address object, <code>{port, address}</code> that tell you which port / address this socket is bound to.</p>
<h4 id="socketonclose"><a href="#socketonclose" class="anchor"></a><code>socket.on(&#39;close&#39;)</code></h4><p>Emitted when the socket is fully closed.</p>
<h4 id="socketonerror"><a href="#socketonerror" class="anchor"></a><code>socket.on(&#39;error&#39;)</code></h4><p>Emitted if the socket experiences an error.</p>
<h4 id="socketlistenport-host-onlistening"><a href="#socketlistenport-host-onlistening" class="anchor"></a><code>socket.listen([port], [host], [onlistening])</code></h4><p>Start listening for incoming connections. Performs a bind as well.</p>
<h4 id="socketonconnection-connection"><a href="#socketonconnection-connection" class="anchor"></a><code>socket.on(&#39;connection&#39;, connection)</code></h4><p>Emitted after you start listening and a client connects to this socket.
Connection is similar to the connection used in the net api.</p>
<h4 id="connection-socketconnectport-host"><a href="#connection-socketconnectport-host" class="anchor"></a><code>connection = socket.connect(port, host)</code></h4><p>Connect to another socket. Connection is similar to the connection used in the net api.</p>
<h4 id="socketunref"><a href="#socketunref" class="anchor"></a><code>socket.unref()</code></h4><p>Dereference the socket from the node event loop.</p>
<h4 id="socketref"><a href="#socketref" class="anchor"></a><code>socket.ref()</code></h4><p>Opposite of <code>socket.unref()</code></p>
<h2 id="license"><a href="#license" class="anchor"></a>License</h2><p>MIT</p>
</div>
  </div>
        </div>
      </main>
    </div>
<script src="/bundle.js"></script>
</body>
</html>
