<!doctype html>
<html lang="en">
<head>
<title>Dat World</title>
<meta charset="utf-8">

<link rel="stylesheet" href="/bundle.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/style.css">
</head>
<body>
<div id="choo-root" class="minidocs">
    <div class="_2bbb10f8 minidocs-sidebar">
    <div class="minidocs-header">
      <h1><a href="/"><img src="/dat-data-logo.svg" alt="Dat World" class="minidocs-logo" /></a></h1>
    </div>
    <div class="_606ae572 minidocs-contents">
    <button class="minidocs-menu-toggle">Menu</button>
    <div class="minidocs-menu menu-closed menu-small">
      <div class="minidocs-menu-wrapper">
        <div class="h1">Welcome</div><div><a href="/awesome-dat" class="content-link ">Awesome Dat</a></div><div class="h1">For the users</div><div><a href="/dat" class="content-link ">maxogden/dat</a></div><div><a href="/dat-desktop" class="content-link ">juliangruber/dat-desktop</a></div><div><a href="/datfolder" class="content-link ">datproject/datfolder</a></div><div class="h1">Organization &amp; Specs</div><div><a href="/website" class="content-link ">datproject/website</a></div><div><a href="/design" class="content-link ">datproject/design</a></div><div><a href="/docs" class="content-link ">datproject/docs</a></div><div><a href="/dat" class="content-link ">juliangruber/dat</a></div><div><a href="/projects" class="content-link ">datproject/projects</a></div><div><a href="/discussions" class="content-link ">datproject/discussions</a></div><div class="h1">Hypercore &amp; Hyperdrive</div><div><a href="/hyperdrive" class="content-link ">mafintosh/hyperdrive</a></div><div><a href="/hypercore" class="content-link ">mafintosh/hypercore</a></div><div><a href="/hypercore-protocol" class="content-link ">mafintosh/hypercore-protocol</a></div><div><a href="/rabin" class="content-link ">datproject/rabin</a></div><div><a href="/merkle-tree-stream" class="content-link ">mafintosh/merkle-tree-stream</a></div><div class="h1">Networking</div><div><a href="/hyperdiscovery" class="content-link ">karissa/hyperdiscovery</a></div><div><a href="/hyperdrive-http" class="content-link ">joehand/hyperdrive-http</a></div><div class="h1">Random Access</div><div><a href="/random-access-file" class="content-link ">mafintosh/random-access-file</a></div><div><a href="/random-access-memory" class="content-link ">mafintosh/random-access-memory</a></div><div><a href="/abstract-random-access" class="content-link ">juliangruber/abstract-random-access</a></div><div><a href="/random-access-page-files" class="content-link ">mafintosh/random-access-page-files</a></div><div class="h1">Dat CLI Tools</div><div><a href="/dat-ls" class="content-link ">mafintosh/dat-ls</a></div><div><a href="/hyperhttp-cli" class="content-link ">joehand/hyperhttp-cli</a></div><div><a href="/dat-doctor" class="content-link ">joehand/dat-doctor</a></div><div class="h1">Using Archives and Feeds</div><div><a href="/multidrive" class="content-link ">yoshuawuyts/multidrive</a></div><div><a href="/dat-node" class="content-link active">datproject/dat-node</a></div><div><a href="/dat-api" class="content-link ">karissa/dat-api</a></div><div><a href="/normcore" class="content-link ">yoshuawuyts/normcore</a></div><div class="h1">Importing &amp; Exporting</div><div><a href="/hyperdrive-import-files" class="content-link ">juliangruber/hyperdrive-import-files</a></div><div><a href="/zip-to-hyperdrive" class="content-link ">karissa/zip-to-hyperdrive</a></div><div><a href="/hyperdrive-to-zip-stream" class="content-link ">pfrazee/hyperdrive-to-zip-stream</a></div><div><a href="/hyperdrive-duplicate" class="content-link ">joehand/hyperdrive-duplicate</a></div><div><a href="/github-to-hypercore" class="content-link ">yoshuawuyts/github-to-hypercore</a></div><div><a href="/url-dat" class="content-link ">joehand/url-dat</a></div><div><a href="/tar-dat" class="content-link ">joehand/tar-dat</a></div><div class="h1">Stats</div><div><a href="/hyperdrive-stats" class="content-link ">juliangruber/hyperdrive-stats</a></div><div><a href="/hyperdrive-network-speed" class="content-link ">joehand/hyperdrive-network-speed</a></div><div class="h1">Misc</div><div><a href="/dat-encoding" class="content-link ">juliangruber/dat-encoding</a></div><div><a href="/hypercore-index" class="content-link ">juliangruber/hypercore-index</a></div><div><a href="/hyperdrive-ln" class="content-link ">poga/hyperdrive-ln</a></div><div><a href="/hyperdrive-multiwriter" class="content-link ">substack/hyperdrive-multiwriter</a></div><div><a href="/hyperdrive-named-archives" class="content-link ">substack/hyperdrive-named-archives</a></div><div class="h1">Browser Modules</div><div><a href="/dat-elements" class="content-link ">datproject/dat-elements</a></div><div><a href="/hyperdrive-ui" class="content-link ">karissa/hyperdrive-ui</a></div><div class="h1">Archiving, Backup, Dat Servers</div><div><a href="/dat" class="content-link ">juliangruber/dat</a></div><div><a href="/hypercore-archiver" class="content-link ">mafintosh/hypercore-archiver</a></div><div><a href="/hypercore-archiver-bot" class="content-link ">mafintosh/hypercore-archiver-bot</a></div><div><a href="/archiver-server" class="content-link ">joehand/archiver-server</a></div><div><a href="/archiver-api" class="content-link ">joehand/archiver-api</a></div><div><a href="/dat-archiver" class="content-link ">maxogden/dat-archiver</a></div><div class="h1">Science &amp; Academia</div><div><a href="/sciencefair" class="content-link ">codeforscience/sciencefair</a></div><div><a href="/svalbard" class="content-link ">datproject/svalbard</a></div><div class="h1">Data Processing</div><div><a href="/hyperspark" class="content-link ">poga/hyperspark</a></div><div><a href="/jawn" class="content-link ">CfABrigadePhiladelphia/jawn</a></div><div class="h1">Web &amp; Development</div><div><a href="/hyperfeed" class="content-link ">poga/hyperfeed</a></div><div><a href="/git-dat" class="content-link ">substack/git-dat</a></div><div><a href="/hyperpipe" class="content-link ">mafintosh/hyperpipe</a></div>
      </div>
    </div>
  </div>
  </div>
    <div class="_571b6797 minidocs-main">
      <div class="markdown-body">
        <div class="_3f4b1fbc minidocs-content">
    
    
    <div><h1 id="dat-node-travis-https-travis-ci-org-datproject-dat-node-svg-branch-master-https-travis-ci-org-datproject-dat-node-npm-https-img-shields-io-npm-v-dat-node-svg-style-flat-square-https-npmjs-org-package-dat-node-">dat-node <a href="https://travis-ci.org/datproject/dat-node"><img src="https://travis-ci.org/datproject/dat-node.svg?branch=master" alt="Travis"></a> <a href="https://npmjs.org/package/dat-node"><img src="https://img.shields.io/npm/v/dat-node.svg?style=flat-square" alt="npm"></a></h1>
<p><a href="http://datproject.org"><img src="https://raw.githubusercontent.com/datproject/design/master/downloads/dat-data-logo.png" align="right" width="140"></a></p>
<p><a href="https://datproject.org">Dat</a> is a decentralized data tool for distributing data and files. <strong>dat-node</strong> is a node module to help you build node applications with Dat. Do you want to use Dat in the command line? Check out the command line interface at <a href="https://github.com/datproject/dat">datproject/dat</a>.</p>
<p><strong>Chat with us!</strong>   <a href="http://webchat.freenode.net/?channels=dat"><img src="https://img.shields.io/badge/irc%20channel-%23dat%20on%20freenode-blue.svg" alt="#dat IRC channel on freenode"></a>
<a href="https://gitter.im/datproject/discussions?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="datproject/discussions"></a></p>
<p><a href="https://github.com/feross/standard"><img src="https://cdn.rawgit.com/feross/standard/master/badge.svg" alt="JavaScript Style Guide"></a></p>
<p><strong>Note: dat-node was previously dat-js</strong></p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#examples">Examples</a></li>
<li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#api">API</a></li>
<li><a href="#contribute">Contribute</a></li>
<li><a href="#license">License</a></li>
</ul>
<h2 id="examples">Examples</h2>
<p>Share files with Dat:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> Dat = <span class="hljs-built_in">require</span>(<span class="hljs-string">'dat-node'</span>)

<span class="hljs-keyword">var</span> dat = Dat({<span class="hljs-attr">dir</span>: process.cwd()})
dat.share(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err
  <span class="hljs-comment">// This may take awhile for large directories</span>
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Current directory being shared via Dat!'</span>)
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Download via: '</span>, dat.key.toString(<span class="hljs-string">'hex'</span>))
})
</code></pre>
<p>Download files with Dat:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> Dat = <span class="hljs-built_in">require</span>(<span class="hljs-string">'dat-node'</span>)

<span class="hljs-comment">// Add download key as the second argument</span>
<span class="hljs-keyword">var</span> dat = Dat({<span class="hljs-attr">dir</span>: process.cwd(), <span class="hljs-attr">key</span>: process.argv[<span class="hljs-number">2</span>]})
dat.download()
dat.on(<span class="hljs-string">'download-finished'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err</span>) </span>{
  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> err
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Finished downloading!'</span>)
})
</code></pre>
<h2 id="installation">Installation</h2>
<pre><code>npm install dat-<span class="hljs-keyword">node</span><span class="hljs-title"></span>
</code></pre><h2 id="usage">Usage</h2>
<p>Dat-node provides an interface for sharing and downloading files, like we do in the Dat command line tool. Dat-node works great if you want to manage Dat folders in a way that is compatible with the Dat CLI and other Dat tools.</p>
<p>Dat-node works the same way as the command line tool. There are two basic operations:</p>
<ul>
<li>Sharing: share a directory to a key</li>
<li>Downloading: download files from a key into a directory</li>
</ul>
<p>Dat-node will create a <code>.dat</code> folder in the directory you specify with the <code>dir</code> option. This allows you to resume the share or download later using the Dat command line tool, or another Dat-compatible application.</p>
<p>Whenever you initiate Dat you need to specify at least the directory.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> Dat = <span class="hljs-built_in">require</span>(<span class="hljs-string">'dat-node'</span>)
<span class="hljs-keyword">var</span> dat = Dat({<span class="hljs-attr">dir</span>: <span class="hljs-string">'some-path'</span>})
</code></pre>
<p>By default, Dat-node assumes you are creating a new Dat. If you are using a dat created by other user, you need to specify the key too:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> Dat = <span class="hljs-built_in">require</span>(<span class="hljs-string">'dat-node'</span>)
<span class="hljs-keyword">var</span> dat = Dat({<span class="hljs-attr">dir</span>: <span class="hljs-string">'some-path'</span>, <span class="hljs-attr">key</span>:<span class="hljs-string">'some64characterdatkey'</span>})
</code></pre>
<p>From there, you can either share or download: <code>dat.share(cb)</code> or <code>dat.download(cb)</code>. That&#39;s it! Read below for the full API and options.</p>
<h2 id="api">API</h2>
<p>The main goal of the API is to support the Dat command line tool. The options here should be familiar if you use the command line tool.</p>
<h3 id="options">Options</h3>
<pre><code class="lang-js">{
  <span class="hljs-attr">dir</span>: <span class="hljs-string">'downloads/path-to-dir/'</span>, <span class="hljs-comment">// path to share or download to. always required</span>
  key: <span class="hljs-string">'Datkey'</span>, <span class="hljs-comment">// required for downloads</span>
  ignore: [<span class="hljs-string">'dir/**'</span>, <span class="hljs-string">'files.**'</span>], <span class="hljs-comment">// ignore files. uses anymatch to check paths</span>
  ignoreHidden: <span class="hljs-literal">true</span>, <span class="hljs-comment">// by default ignore all hidden files</span>
  snapshot: <span class="hljs-literal">false</span>, <span class="hljs-comment">//: sharing snapshot archive, not used for download</span>
  watchFiles: <span class="hljs-literal">true</span>, <span class="hljs-comment">// watch files for changes. Archive needs to be live. Defaults to same value as archive.live.</span>
  discovery: {<span class="hljs-attr">upload</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">download</span>: <span class="hljs-literal">true</span>}, <span class="hljs-comment">// Join swarm and upload/download data. Set to false to disable discovery</span>
  port: <span class="hljs-number">3828</span>, <span class="hljs-comment">// port to use for discovery-swarm. port value is saved in database for subsequent uses</span>
  utp: <span class="hljs-literal">true</span>, <span class="hljs-comment">// use utp for discovery-swarm</span>
  db: level(<span class="hljs-string">'.dat'</span>) <span class="hljs-comment">// hyperdrive compatible database, uses levelDB .dat folder by default</span>
}
</code></pre>
<h3 id="dat-download-cb-">dat.download(cb)</h3>
<p>Download <code>dat.key</code> to <code>dat.dir</code>. Does not callback for live archives.</p>
<h3 id="dat-share-cb-">dat.share(cb)</h3>
<p>Share directory specified in <code>opts.dir</code>. Callback fired when all files are added to the drive (files will start being shared as they are added for live archives). The swarm is automatically joined for key when it is available for share &amp; download, specify <code>discovery: false</code> to not join the swarm automatically.</p>
<h3 id="dat-open-cb-">dat.open(cb)</h3>
<p>Open is called automatically for share and resume. It may be helpful to call it manually if you want to check for an existing Dat before sharing/downloading. Opens a Dat in the directory. This looks for an existing <code>.dat</code> directory. If <code>.dat</code> directory exists, resumes previous Dat. If not, it will create a new Dat.</p>
<h3 id="-dat-archive-"><code>dat.archive</code></h3>
<p>Hyperdrive archive instance.</p>
<h3 id="-dat-live-"><code>dat.live</code></h3>
<p>Dat is live. When downloading, this will be set to the true if the remote Dat is live, regardless of <code>snapshot</code> option.</p>
<h3 id="-dat-resume-"><code>dat.resume</code></h3>
<p>Previous dat resumed. Populated after <code>dat.open</code>.</p>
<h3 id="-dat-options-"><code>dat.options</code></h3>
<p>Options passed on initialization and default options set.</p>
<h3 id="events">Events</h3>
<h4 id="share-events">Share Events</h4>
<ul>
<li><code>dat.on(&#39;key&#39;)</code>: key is available (this is at archive-finalized for snapshots)</li>
<li><code>dat.on(&#39;file-counted&#39;, stats)</code>: file counted, stats is progress file stats</li>
<li><code>dat.on(&#39;files-counted&#39;, stats)</code>: total file count available, this fires before files are added to archive</li>
<li><code>dat.on(&#39;file-added&#39;, file)</code>: file added to archive</li>
<li><code>dat.on(&#39;upload&#39;, data)</code>: piece of data uploaded</li>
<li><code>dat.on(&#39;archive-finalized&#39;)</code>: archive finalized, all files appended</li>
<li><code>dat.on(&#39;archive-updated&#39;)</code>: live archive changed</li>
</ul>
<h4 id="download-events">Download Events</h4>
<ul>
<li><code>dat.on(&#39;key&#39;)</code>: key is available</li>
<li><code>dat.on(&#39;file-downloaded&#39;, file)</code>: file downloaded</li>
<li><code>dat.on(&#39;download&#39;, data)</code>: piece of data downloaded</li>
<li><code>dat.on(&#39;upload&#39;, data)</code>: piece of data uploaded</li>
<li><code>dat.on(&#39;download-finished&#39;)</code>: archive download finished</li>
</ul>
<h4 id="swarm-events">Swarm Events</h4>
<p>Swarm events and stats are available from <code>dat.swarm</code>.</p>
<ul>
<li><code>dat.on(&#39;connecting&#39;)</code>: looking for peers</li>
<li><code>dat.on(&#39;swarm-update&#39;)</code>: peer connect/disconnect</li>
</ul>
<h4 id="internal-stats">Internal Stats</h4>
<p>Stats we track internally for progress displays. It is not recommended to use these currently.</p>
<pre><code class="lang-js">dat.stats = {
    <span class="hljs-attr">filesTotal</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">filesProgress</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">bytesTotal</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// archive.content.bytes</span>
    bytesProgress: <span class="hljs-number">0</span>, <span class="hljs-comment">// file import progress</span>
    blocksTotal: <span class="hljs-number">0</span>, <span class="hljs-comment">// archive.content.blocks</span>
    blocksProgress: <span class="hljs-number">0</span>, <span class="hljs-comment">// download progress</span>
    bytesUp: <span class="hljs-number">0</span>, <span class="hljs-comment">// archive.on('upload', data.length)</span>
    bytesDown: <span class="hljs-number">0</span> <span class="hljs-comment">// archive.on('download', data.length)</span>
}
</code></pre>
<h2 id="contribute">Contribute</h2>
<p>Contributions are welcome! Currently we plan to limit the feature set to features used in the <a href="https://github.com/datproject/dat">Dat CLI</a>.</p>
<p>Read about contribution and node module development tips in the <a href="https://github.com/datproject/dat/blob/master/CONTRIBUTING.md">dat repository</a>.</p>
<h2 id="license">License</h2>
<p>MIT</p>
</div>
  </div>
      </div>
    </div>
  </div>
<script src="/bundle.js"></script>
</body>
</html>
