<!doctype html>
<html lang="en" dir="ltr">
<head>
<title>Awesome Dat</title>
<meta charset="utf-8">

<link rel="stylesheet" href="/bundle.css">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="/style.css">
</head>
<body>
<div id="choo-root" class="_d4e87350 minidocs flex flex-column m0 h-100">
      <div class="minidocs-header-flex flex">
        <header class="_19f2d18a minidocs-header ph4 w-100 bg-black-90">
    <nav class="flex justify-between">
      <div class="flex items-center">
        <div class="menu-button">
          <a class=" menu-toggle"></a>
        </div>
        <a href="/" title="Awesome Dat" class="inline-flex items-center">
        <img src="/dat-data-logo.svg" alt="Awesome Dat" class="minidocs-header-logo dib w2 h2" />
        <span class="minidocs-header-title ml2 pr2 white">Awesome Dat</span>
      </a>
      </div>
      <div class="minidocs-header-nav flex-grow flex items-center tr ttu">
        <a href="/install" title="Install" class="minidocs-header-link white dim link dn dib-ns mr3-ns">Install</a>
        <a href="http://datproject.org/" title="Home" class="minidocs-header-link white dim link dib mr3-ns">Home</a>
      </div>
    </nav>
  </header>
      </div>
      <main class="minidocs-main-flex flex">
        <div class="minidocs-sidebar-flex open order-0 overflow-auto bg-near-white">
        <div class="_068b628f minidocs-menu pa3">
      <div class="f3 pt2">Welcome</div><div><a href="/awesome-dat" class="content-link ">Awesome Dat</a></div><div class="f3 pt2">Dat Applications</div><div><a href="/dat" class="content-link ">datproject/dat</a></div><div><a href="/dat-desktop" class="content-link ">datproject/dat-desktop</a></div><div class="f3 pt2">Community Applications</div><div><a href="/sciencefair" class="content-link ">codeforscience/sciencefair</a></div><div><a href="/hyperirc" class="content-link ">mafintosh/hyperirc</a></div><div><a href="/soundcloud-archiver" class="content-link ">jondashkyle/soundcloud-archiver</a></div><div><a href="/hypervision" class="content-link ">mafintosh/hypervision</a></div><div><a href="/hypertweet" class="content-link ">joehand/hypertweet</a></div><div><a href="/dat-photos-app" class="content-link ">beakerbrowser/dat-photos-app</a></div><div class="f3 pt2">High-Level APIs</div><div><a href="/dat-node" class="content-link ">datproject/dat-node</a></div><div><a href="/dat-js" class="content-link ">datproject/dat-js</a></div><div><a href="/pauls-dat-api" class="content-link ">beakerbrowser/pauls-dat-api</a></div><div><a href="/node-dat-archive" class="content-link ">beakerbrowser/node-dat-archive</a></div><div class="f3 pt2">Hosting &amp; Dat Management</div><div><a href="/hypercore-archiver" class="content-link ">mafintosh/hypercore-archiver</a></div><div><a href="/hypercloud" class="content-link ">datprotocol/hypercloud</a></div><div><a href="/hashbase" class="content-link ">beakerbrowser/hashbase</a></div><div><a href="/dat-now" class="content-link ">joehand/dat-now</a></div><div><a href="/hypercore-archiver-bot" class="content-link ">mafintosh/hypercore-archiver-bot</a></div><div><a href="/hypercore-archiver-ws" class="content-link ">joehand/hypercore-archiver-ws</a></div><div><a href="/dat-registry-api" class="content-link ">datproject/dat-registry-api</a></div><div><a href="/dat-registry-client" class="content-link ">datproject/dat-registry-client</a></div><div class="f3 pt2">Managing &amp; Aggregating Dats</div><div><a href="/multidat" class="content-link ">datproject/multidat</a></div><div><a href="/multidrive" class="content-link ">datproject/multidrive</a></div><div>
            <a href="/dat-pki" class="content-link active">jayrbolton/dat-pki</a>
            <div class="minidocs-menu-toc">
              <a href="#setupoptions-callback" class="f5 content-link">setup(options, callback)</a><a href="#loadpath-passphrase-callback" class="f5 content-link">load(path, passphrase, callback)</a><a href="#createdatuser-datname-callback" class="f5 content-link">createDat(user, datName, callback)</a><a href="#makedatpublicuser-datname-callback" class="f5 content-link">makeDatPublic(user, datName, callback)</a><a href="#makedatprivateuser-datname-callback" class="f5 content-link">makeDatPrivate(user, datName, callback)</a><a href="#sharedatuser-datname-accessids-callback" class="f5 content-link">shareDat(user, datName, accessIDs, callback)</a><a href="#unsharedatuser-datname-accessids-callback" class="f5 content-link">unshareDat(user, datName, accessIds, callback)</a><a href="#followusera-userblink-callback" class="f5 content-link">follow(userA, userBLink, callback)</a><a href="#handshakeusera-userblink-callback" class="f5 content-link">handshake(userA, userBLink, callback)</a><a href="#checkhandshakeusera-userb-cb" class="f5 content-link">checkHandshake(userA, userB, cb)</a><a href="#creategroupuser-groupname-callback" class="f5 content-link">createGroup(user, groupName, callback)</a><a href="#adduserstogroupuser-groupid-userids-callback" class="f5 content-link">addUsersToGroup(user, groupID, [userIDs], callback)</a><a href="#removeusersfromgroupuser-groupid-userids-callback" class="f5 content-link">removeUsersFromGroup(user, groupID, [userIDs], callback)</a>
            </div>
          </div><div><a href="/injestdb" class="content-link ">beakerbrowser/injestdb</a></div><div class="f3 pt2">Http Hosting</div><div><a href="/hyperdrive-http" class="content-link ">joehand/hyperdrive-http</a></div><div><a href="/dathttpd" class="content-link ">beakerbrowser/dathttpd</a></div><div class="f3 pt2">Dat Link Utilties</div><div><a href="/dat-dns" class="content-link ">datprotocol/dat-dns</a></div><div><a href="/dat-link-resolve" class="content-link ">joehand/dat-link-resolve</a></div><div><a href="/parse-dat-url" class="content-link ">pfrazee/parse-dat-url</a></div><div><a href="/dat-encoding" class="content-link ">juliangruber/dat-encoding</a></div><div class="f3 pt2">Dat Utilities</div><div><a href="/dat-log" class="content-link ">joehand/dat-log</a></div><div><a href="/dat-ls" class="content-link ">mafintosh/dat-ls</a></div><div><a href="/hyperhealth" class="content-link ">karissa/hyperhealth</a></div><div><a href="/hyperdrive-network-speed" class="content-link ">joehand/hyperdrive-network-speed</a></div><div class="f3 pt2">File Imports &amp; Exports</div><div><a href="/hyperdrive-import-files" class="content-link ">juliangruber/hyperdrive-import-files</a></div><div><a href="/mirror-folder" class="content-link ">mafintosh/mirror-folder</a></div><div><a href="/hyperdrive-staging-area" class="content-link ">pfrazee/hyperdrive-staging-area</a></div><div><a href="/hyperdrive-to-zip-stream" class="content-link ">pfrazee/hyperdrive-to-zip-stream</a></div><div class="f3 pt2">Hypercore Tools</div><div><a href="/hyperpipe" class="content-link ">mafintosh/hyperpipe</a></div><div class="f3 pt2">Dat Core Modules</div><div><a href="/hyperdrive" class="content-link ">mafintosh/hyperdrive</a></div><div><a href="/hypercore" class="content-link ">mafintosh/hypercore</a></div><div class="f3 pt2">CLI Utilities</div><div><a href="/dat-doctor" class="content-link ">joehand/dat-doctor</a></div><div><a href="/dat-ignore" class="content-link ">joehand/dat-ignore</a></div><div><a href="/dat-json" class="content-link ">joehand/dat-json</a></div><div class="f3 pt2">Networking</div><div><a href="/hyperdiscovery" class="content-link ">karissa/hyperdiscovery</a></div><div><a href="/discovery-swarm" class="content-link ">mafintosh/discovery-swarm</a></div><div><a href="/webrtc-swarm" class="content-link ">mafintosh/webrtc-swarm</a></div><div><a href="/dat-swarm-defaults" class="content-link ">joehand/dat-swarm-defaults</a></div><div class="f3 pt2">Lower level networking modules</div><div><a href="/discovery-channel" class="content-link ">maxogden/discovery-channel</a></div><div><a href="/dns-discovery" class="content-link ">mafintosh/dns-discovery</a></div><div><a href="/multicast-dns" class="content-link ">mafintosh/multicast-dns</a></div><div><a href="/bittorrent-dht" class="content-link ">webtorrent/bittorrent-dht</a></div><div><a href="/utp-native" class="content-link ">mafintosh/utp-native</a></div><div><a href="/signalhub" class="content-link ">mafintosh/signalhub</a></div><div class="f3 pt2">Storage</div><div><a href="/dat-storage" class="content-link ">datproject/dat-storage</a></div><div><a href="/dat-secret-storage" class="content-link ">datproject/dat-secret-storage</a></div><div class="f3 pt2">Random Access</div><div><a href="/abstract-random-access" class="content-link ">juliangruber/abstract-random-access</a></div><div><a href="/multi-random-access" class="content-link ">mafintosh/multi-random-access</a></div><div><a href="/random-access-file" class="content-link ">mafintosh/random-access-file</a></div><div><a href="/random-access-memory" class="content-link ">mafintosh/random-access-memory</a></div><div><a href="/random-access-page-files" class="content-link ">mafintosh/random-access-page-files</a></div><div><a href="/dat-http" class="content-link ">datproject/dat-http</a></div><div><a href="/random-access-idb" class="content-link ">substack/random-access-idb</a></div><div class="f3 pt2">Other Related Dat Project Modules</div><div><a href="/peer-network" class="content-link ">mafintosh/peer-network</a></div><div><a href="/hyperdht" class="content-link ">mafintosh/hyperdht</a></div><div class="f3 pt2">Dat Project Organization Stuff</div><div><a href="/datproject.org" class="content-link ">datproject/datproject.org</a></div><div><a href="/discussions" class="content-link ">datproject/discussions</a></div><div><a href="/design" class="content-link ">datproject/design</a></div><div><a href="/dat-elements" class="content-link ">datproject/dat-elements</a></div><div><a href="/dat-colors" class="content-link ">kriesse/dat-colors</a></div><div><a href="/dat-icons" class="content-link ">kriesse/dat-icons</a></div><div><a href="/dat.json" class="content-link ">juliangruber/dat.json</a></div><div class="f3 pt2">Outdated</div><div><a href="/dat.haus" class="content-link ">juliangruber/dat.haus</a></div><div><a href="/hyperfeed" class="content-link ">poga/hyperfeed</a></div><div><a href="/normcore" class="content-link ">yoshuawuyts/normcore</a></div><div><a href="/github-to-hypercore" class="content-link ">yoshuawuyts/github-to-hypercore</a></div><div><a href="/hyperspark" class="content-link ">poga/hyperspark</a></div><div><a href="/hypercore-index" class="content-link ">juliangruber/hypercore-index</a></div><div><a href="/hyperdrive-encoding" class="content-link ">juliangruber/hyperdrive-encoding</a></div><div><a href="/hyperdrive-http-server" class="content-link ">mafintosh/hyperdrive-http-server</a></div><div><a href="/hyperdrive-http" class="content-link ">joehand/hyperdrive-http</a></div><div><a href="/dat-push" class="content-link ">joehand/dat-push</a></div><div><a href="/dat-backup" class="content-link ">joehand/dat-backup</a></div><div><a href="/archiver-server" class="content-link ">joehand/archiver-server</a></div><div><a href="/archiver-api" class="content-link ">joehand/archiver-api</a></div><div><a href="/hyperdrive-ln" class="content-link ">poga/hyperdrive-ln</a></div><div><a href="/hyperdrive-multiwriter" class="content-link ">substack/hyperdrive-multiwriter</a></div><div><a href="/hyperdrive-named-archives" class="content-link ">substack/hyperdrive-named-archives</a></div><div><a href="/git-dat" class="content-link ">substack/git-dat</a></div><div><a href="/jawn" class="content-link ">CfABrigadePhiladelphia/jawn</a></div><div><a href="/dat-archiver" class="content-link ">maxogden/dat-archiver</a></div><div><a href="/hyperdrive-stats" class="content-link ">juliangruber/hyperdrive-stats</a></div><div><a href="/hypercore-stats-server" class="content-link ">karissa/hypercore-stats-server</a></div><div><a href="/hypercore-stats-ui" class="content-link ">mafintosh/hypercore-stats-ui</a></div><div><a href="/zip-to-hyperdrive" class="content-link ">karissa/zip-to-hyperdrive</a></div><div><a href="/url-dat" class="content-link ">joehand/url-dat</a></div><div><a href="/tar-dat" class="content-link ">joehand/tar-dat</a></div><div><a href="/hyperdrive-duplicate" class="content-link ">joehand/hyperdrive-duplicate</a></div>
    </div>
      </div>
        <div id="minidocs-content" class="minidocs-content-flex order-1 overflow-auto">
          <div class="_32076d68 pa3 ph5-ns pv4-ns">
    
    
    <div><h1 id="dat-public-key-infrastucture"><a href="#dat-public-key-infrastucture" class="anchor"></a>dat public key infrastucture</h1><blockquote>
<p><em>Note:</em> This project is still very much an experimental work in progress. The examples below arent reliable.</p>
</blockquote>
<p>Create decentralized user accounts with contacts, groups, private file sharing, encrypted messaging, and more.</p>
<p><em>what it does</em></p>
<ul>
<li>create your own user and group identities which can span multiple devices</li>
<li>privately share specific dats with specific people and groups over p2p using cryptography</li>
<li>send messages with certain contacts over dat</li>
<li>publicly share dats</li>
</ul>
<p><a href="https://github.com/jayrbolton/dat-pki/wiki/How-it-Works"><em>how it works</em></a></p>
<h1 id="api"><a href="#api" class="anchor"></a>api</h1><h2 id="setupoptions-callback"><a href="#setupoptions-callback" class="anchor"></a>setup(options, callback)</h2><p>Create a new user. The <code>options</code> object can have these properties:</p>
<ul>
<li>path: path you want to use to save your data (eg <code>~/.dat</code>)</li>
<li>name: name to use for this user</li>
<li>pass: passphrase for generating keypair</li>
</ul>
<p><code>callback</code> receives arguments for <code>callback(err, user)</code>, where <code>user</code> is an object with these properties:</p>
<ul>
<li>name</li>
<li>path</li>
<li>pubKey</li>
<li>privKey</li>
<li>id: a unique id that identifies this user across devices in the network (public)</li>
<li>publicDat: a dat object for the user&#39;s public dat</li>
<li>link: dat link of the users public dat that others can use to add them as a contact</li>
</ul>
<p>The <code>publicDat</code> will be opened and joined on the network, so you&#39;ll want to manually <code>user.publicDat.close()</code> when you&#39;re done</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> {setup} = <span class="hljs-built_in">require</span>(<span class="hljs-string">'dat-pki'</span>)

setup({
  <span class="hljs-attr">path</span>: <span class="hljs-string">'~/.dat'</span>
, <span class="hljs-attr">name</span>: <span class="hljs-string">'bob ross'</span>
, <span class="hljs-attr">passphrase</span>: <span class="hljs-string">'123 abc'</span>
}, (err, user) =&gt; {
  <span class="hljs-comment">// do stuff with the user</span>
})
</code></pre>
<h2 id="loadpath-passphrase-callback"><a href="#loadpath-passphrase-callback" class="anchor"></a>load(path, passphrase, callback)</h2><p>This will load an existing user from a directory with a passphrase, and unencrypt their stuff.</p>
<p>The callback takes <code>callback(err, user)</code>. The user object in the second argument to this callback is the exact same object as the one from <code>setup</code></p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> {load} = <span class="hljs-built_in">require</span>(<span class="hljs-string">'dat-pki'</span>)

load(<span class="hljs-string">'~/.dat'</span>, <span class="hljs-string">'123 abc'</span>, (err, user) =&gt; {
  <span class="hljs-comment">// do stuff with the user</span>
})
</code></pre>
<h2 id="createdatuser-datname-callback"><a href="#createdatuser-datname-callback" class="anchor"></a>createDat(user, datName, callback)</h2><p>Initialize a new dat for a user. The callback receives <code>callback(err, dat)</code> where <code>dat</code> is the dat object. The new dat has not joined the network or imported files, so you&#39;ll want to call <code>dat.joinNetwork()</code>, <code>dat.importFiles()</code>, and anything else you want. The <code>datName</code> needs to be unique for this user.</p>
<p>Also see makeDatPublic and shareDat.</p>
<h2 id="makedatpublicuser-datname-callback"><a href="#makedatpublicuser-datname-callback" class="anchor"></a>makeDatPublic(user, datName, callback)</h2><p>Make a dat fully public, so users that follow you can download its files. The callback receives <code>callback(err, dat)</code> where <code>dat</code> is the dat object</p>
<h2 id="makedatprivateuser-datname-callback"><a href="#makedatprivateuser-datname-callback" class="anchor"></a>makeDatPrivate(user, datName, callback)</h2><p>Remove a dat link from your public dat, so others cannot automatically see the dat. Changes the dat key.</p>
<h2 id="sharedatuser-datname-accessids-callback"><a href="#sharedatuser-datname-accessids-callback" class="anchor"></a>shareDat(user, datName, accessIDs, callback)</h2><p>Share a dat with one or more contacts and/or groups by their ids. callback gets <code>callback(err, dat)</code></p>
<h2 id="unsharedatuser-datname-accessids-callback"><a href="#unsharedatuser-datname-accessids-callback" class="anchor"></a>unshareDat(user, datName, accessIds, callback)</h2><p>Unshare a dat from certain contacts/groups. Changes the dat link.</p>
<h2 id="followusera-userblink-callback"><a href="#followusera-userblink-callback" class="anchor"></a>follow(userA, userBLink, callback)</h2><p>Follow another user, which allows userA to read any public data from userB, such as their public dat links.</p>
<p>The callback receives <code>callback(err, userB)</code>, where <code>userB</code> is an object with these properties:</p>
<ul>
<li>id</li>
<li>name</li>
<li>pubKey</li>
<li>path</li>
<li>link</li>
</ul>
<h2 id="handshakeusera-userblink-callback"><a href="#handshakeusera-userblink-callback" class="anchor"></a>handshake(userA, userBLink, callback)</h2><p>To create a 1:1 private data channel with another user, they both perform a handshake process. If the handshake succeeds, the two users are now &quot;contacts&quot; and can send private data to each other, including links to private dats.</p>
<p>This will create another dat, called the &quot;relationship dat&quot;. That dat&#39;s address will get encrypted using userB&#39;s pubkey and placed in userA&#39;s public handshakes directory for userB to check using <code>checkHandshake</code>.</p>
<p>If both userA and userB successfully handshake with each other, the contact is created. Both users will have separate &quot;relationship dats&quot; for pushing data to the other user.</p>
<p>Also see checkHandshake</p>
<p>The callback receives <code>callback(err, userB, relDat)</code>. The third arg, <code>relDat</code>, is a dat object for the relationship dat. It is opened automatically</p>
<h2 id="checkhandshakeusera-userb-cb"><a href="#checkhandshakeusera-userb-cb" class="anchor"></a>checkHandshake(userA, userB, cb)</h2><p><code>userA</code> wants to check the status of a handshake that <code>userB</code> initiated. If <code>userB</code> has a handshake file in their public dat, then <code>userA</code> can decrypt it and start downloading from the relationship dat.</p>
<p>The callback receives <code>callback(err, userB, relFromDat)</code>. If the check fails, then err will be non-null. The third arg, <code>relFromDat</code>, is the dat that userA has created to download updates from userA. It is opened automatically.</p>
<h2 id="creategroupuser-groupname-callback"><a href="#creategroupuser-groupname-callback" class="anchor"></a>createGroup(user, groupName, callback)</h2><p>Create a group identified by a name. The callback receives <code>callback(err, groupID)</code>. </p>
<h2 id="adduserstogroupuser-groupid-userids-callback"><a href="#adduserstogroupuser-groupid-userids-callback" class="anchor"></a>addUsersToGroup(user, groupID, [userIDs], callback)</h2><p>Add one or more users in your contacts to a group. The users must all be contacts with relationships established using handshake and checkHandshake.</p>
<h2 id="removeusersfromgroupuser-groupid-userids-callback"><a href="#removeusersfromgroupuser-groupid-userids-callback" class="anchor"></a>removeUsersFromGroup(user, groupID, [userIDs], callback)</h2><p>Remove one or more users from a group</p>
</div>
  </div>
        </div>
      </main>
    </div>
<script src="/bundle.js"></script>
</body>
</html>
